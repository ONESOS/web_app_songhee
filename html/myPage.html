<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="../css/myPage.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="../css/nav-bar.css">
    <title>ONESOS 내 정보</title>
</head>

<body>
    <header>
        <div class="div_header">
            내 정보
        </div>
    </header>
    <main>
        <div class="div_border_1">

            <a class="text_gray">● </a><a class="my_info_1" id="name"></a><a class="text_orange_1"
                onclick="location.href='myPage_edit.html'" style="cursor:pointer" );>프로필 편집하기</a><br>
            <a class="text_gray">● </a><a class="my_info_1" id="carnumber"></a><br>
            <a class="text_gray">● </a><a class="my_info_1" id="insurance"></a><br>
            <a class="text_gray">이메일 </a> <a id="email"></a> <br>
            <a class="text_gray" >전화번호 </a><a id="number"></a> 


        </div>

        <div class="div_border_2">
            <div target="_self" onclick="location.href='myPage_notice.html'" );>
                공지사항 <a class="text_orange_2" style="cursor:pointer">새로운 공지사항</a></div>
            <hr>
            <div target="_self" onclick="location.href='history.html'" );>
                신고기록</div>
            <hr>
            <div target="_self" onclick="location.href='#'" );>
                버전정보</div>
            <hr>
        </div>
    </main>


</body>
<footer>
    <nav class="bar">
        <ul class="bar__list">
            <li class="bar__btn">
                <a class="bar__link" href="main.html"><i class="fas fa-house-user fa-2x"></i></a>
            <li class="bar__btn">
                <a class="bar__link" href="history.html"><i class="fas fa-solid fa-list fa-2x"></i></a>
            </li>
            <li class="bar__btn">
                <a class="bar__link" href="myPage.html"><i class="fas fa-info-circle fa-2x"></i></a>
            </li>
        </ul>
    </nav>
</footer>
<!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/7.6.2/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.6.2/firebase-analytics.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.6.2/firebase-database.js"></script>
<script src="https://kit.fontawesome.com/840353c2e4.js" crossorigin="anonymous"></script>
<script type="module">


    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.10.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.10.0/firebase-analytics.js";
    var firebaseConfig = {
        apiKey: "AIzaSyAGcHYMEq3ZSdCTj6eEkEZy2m-IHENFh98",
        authDomain: "myren-5a547.firebaseapp.com",
        databaseURL: "https://myren-5a547-default-rtdb.firebaseio.com",
        projectId: "myren-5a547",
        storageBucket: "myren-5a547.appspot.com",
        messagingSenderId: "789517072518",
        appId: "1:789517072518:web:2c6f4e557537356ecd7907",
        measurementId: "G-04JE7VERWK"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    firebase.analytics();

    window.onload = function () {
        // const dbRef = firebase.database().ref();
        const userUid = localStorage.getItem('currentUser')
        console.log(userUid);
        firebase.database().ref('MyRen/UserAccount/' + userUid).once('value').then((snapshot) => {
            if (snapshot.exists()) {
                var data = snapshot.val();
                console.log(data);
                var dbname = data.name;
                var dbcarnumber = data.carNumber;
                var dbinsurance = data.insuranceCompany;
                var dbemail = data.emailId;
                console.log(dbinsurance);
                var dbnumber = data.parentPhoneNumber;

                document.getElementById("name").innerHTML = dbname;
                document.getElementById("carnumber").innerHTML = dbcarnumber;
                document.getElementById("insurance").innerHTML = dbinsurance;
                document.getElementById("email").innerHTML = dbemail;
                document.getElementById("number").innerHTML = dbnumber;
            } else {
                console.log("No data available");
            }
        }).catch((error) => {
            console.error(error);
        });

    }
</script>